<script>
    buildfire.appearance.getAppTheme((err, appTheme) => {
             if (err) return console.error(err);
             let views = document.getElementById("views")
             let iconView = document.getElementById("iconView")
             if (views) views.style.color = appTheme.colors.bodyText;
             if (iconView) iconView.style.color = appTheme.colors.icons;

             document.documentElement.style.setProperty('--tab-active-color', appTheme.colors.primaryTheme);
             document.documentElement.style.setProperty('--tab-text-color', appTheme.colors.headerText);
    });
</script>

<div class="holder padding-zero list-layout-6" ng-class="{'pb75': globalPlaylist}">
    <div class="media-center-plugin news-layout-tabs list-6 text-overlay">
        <div class="plugin-banner clearfix text-overlay">
            <div id="carousel" build-fire-carousel="" ng-init="WidgetHome.loadCarousel()"></div>
        </div>

        <div class="category-tabs-container" ng-if="WidgetHome.categories && WidgetHome.categories.length > 0">
            <div class="category-tabs">
                <div class="category-tab"
                     ng-class="{'active': !WidgetHome.selectedTab}"
                     ng-click="WidgetHome.selectTab(null)"
                     role="button"
                     tabindex="0">
                    <span>All</span>
                </div>
                <div class="category-tab"
                     ng-repeat="category in WidgetHome.categories"
                     ng-class="{'active': WidgetHome.selectedTab === category.id}"
                     ng-click="WidgetHome.selectTab(category.id)"
                     role="button"
                     tabindex="0">
                    <div ng-if="category.data.icon && WidgetHome.isIcon(category.data.icon)"
                         ng-class="category.data.icon"
                         class="tab-icon"></div>
                    <img ng-if="category.data.icon && !WidgetHome.isIcon(category.data.icon)"
                         class="tab-icon-img"
                         crop-width="20"
                         load-image="1x1"
                         crop-height="20"
                         crop-type="crop"
                         data-final-src="{{category.data.icon}}">
                    <span>{{category.data.name}}</span>
                </div>
            </div>
        </div>

        <div class="padded text-left text-overlay wysiwyg" ng-if="WidgetHome.showDescription()">
            <p class="margin-bottom-zero" ng-bind-html="WidgetHome.media.data.content.descriptionHTML | safeHtml">
            </p>
        </div>

        <div id="emptyContainer" class="padded"
            ng-if="!loadingData && !WidgetHome.items.length">
            <div class="empty-state">
                <p>No items found{{WidgetHome.selectedTab ? ' in this category' : ''}}</p>
            </div>
        </div>

        <div class="news-feed-container">
            <div class="news-card clickable" ng-repeat="item in WidgetHome.items track by $index"
                ng-click="WidgetHome.goToMedia($index)">
                <div class="news-card-image-wrapper">
                    <div class="text-overlay" aria-hidden="true">
                        <div
                                ng-if="item.data.topImage && !item.imageLoaded"
                                class="image-placeholder"
                                ng-style="{'padding-top': ((240 / 340) * 100) + '%'}">
                            <div class="image-placeholder__dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                        <img ng-show="item.data.topImage && item.imageLoaded" alt="{{item.data.title}}" class="load-image-hidden news-card-image" aria-hidden="true"
                             load-image="16x9" crop-width="340" crop-height="240" crop-type="crop" image-item="item"
                             data-final-src="{{item.data.topImage}}" tabindex="0">
                        <img alt="{{item.data.title}}" aria-hidden="true" ng-if="!item.data.topImage" class="news-card-image" src="../../../styles/media/holder-16x9.png">
                    </div>
                    <div class="news-card-overlay">
                        <div class="news-card-title-wrapper">
                            <h3 class="news-card-title">{{item.data.title}}</h3>
                            <span class="news-card-date" data-ng-if="item.data.mediaDate">
                                {{item.data.mediaDate | jsDate | date:"MMMM dd, yyyy"}}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="news-card-footer">
                    <div class="news-card-stats">
                        <div class="news-stat-item" ng-if="WidgetHome.media.data.content.showViewCount">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 9C11.2044 9 10.4413 9.31607 9.87868 9.87868C9.31607 10.4413 9 11.2044 9 12C9 12.7956 9.31607 13.5587 9.87868 14.1213C10.4413 14.6839 11.2044 15 12 15C12.7956 15 13.5587 14.6839 14.1213 14.1213C14.6839 13.5587 15 12.7956 15 12C15 11.2044 14.6839 10.4413 14.1213 9.87868C13.5587 9.31607 12.7956 9 12 9ZM12 17C10.6739 17 9.40215 16.4732 8.46447 15.5355C7.52678 14.5979 7 13.3261 7 12C7 10.6739 7.52678 9.40215 8.46447 8.46447C9.40215 7.52678 10.6739 7 12 7C13.3261 7 14.5979 7.52678 15.5355 8.46447C16.4732 9.40215 17 10.6739 17 12C17 13.3261 16.4732 14.5979 15.5355 15.5355C14.5979 16.4732 13.3261 17 12 17ZM12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5Z" fill="currentColor"/>
                            </svg>
                            <span class="news-stat-count">{{item.data.count ? item.data.count : 0}}</span>
                        </div>
                    </div>
                    <div class="news-card-actions">
                        <div class="news-action-icon" ng-if="item.hasDownloadedMedia && WidgetHome.media.data.content.allowOfflineDownload">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 15 16" fill="none">
                                <path d="M7.49996 0.916992C3.59704 0.916992 0.416626 4.09741 0.416626 8.00033C0.416626 11.9032 3.59704 15.0837 7.49996 15.0837C11.4029 15.0837 14.5833 11.9032 14.5833 8.00033C14.5833 4.09741 11.4029 0.916992 7.49996 0.916992ZM6.79163 6.58366V3.75033H8.20829V6.58366H10.3333L7.49996 9.41699L4.66663 6.58366H6.79163ZM11.0416 11.542H3.95829V10.1253H11.0416V11.542Z"
                                    fill="var(--bf-theme-success)"/>
                            </svg>
                        </div>
                        <div class="news-action-icon" ng-if="currentlyDownloading.indexOf(item.id) > -1">
                            <div class="lds-ring-small"><div></div><div></div><div></div><div></div></div>
                        </div>
                        <div class="news-action-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12C9 11.76 8.96 11.53 8.91 11.3L15.96 7.19C16.5 7.69 17.21 8 18 8C19.66 8 21 6.66 21 5C21 3.34 19.66 2 18 2C16.34 2 15 3.34 15 5C15 5.24 15.04 5.47 15.09 5.7L8.04 9.81C7.5 9.31 6.79 9 6 9C4.34 9 3 10.34 3 12C3 13.66 4.34 15 6 15C6.79 15 7.5 14.69 8.04 14.19L15.16 18.35C15.11 18.56 15.08 18.78 15.08 19C15.08 20.61 16.39 21.92 18 21.92C19.61 21.92 20.92 20.61 20.92 19C20.92 17.39 19.61 16.08 18 16.08Z" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="news-action-icon" ng-click="WidgetHome.showDrawer($event, item)" aria-label="{{item.data.title}} options">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 8C13.1 8 14 7.1 14 6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6C10 7.1 10.9 8 12 8ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10ZM12 16C10.9 16 10 16.9 10 18C10 19.1 10.9 20 12 20C13.1 20 14 19.1 14 18C14 16.9 13.1 16 12 16Z" fill="currentColor"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-include="'templates/layouts/bottom-logo.html'"></div>
    </div>
</div>
